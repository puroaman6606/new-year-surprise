<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>New Year Surprise ðŸŽ†</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
  background: black;
  overflow: hidden;
  font-family: 'Segoe UI', sans-serif;
}

/* ðŸ”¥ USER BACKGROUND */
#bg {
  position: fixed;
  inset: 0;
  opacity: 0;
  transition: opacity 1.2s ease;
  z-index: -2;
}

/* TAP SCREEN */
#tapScreen {
  position: fixed;
  inset: 0;
  background: black;
  color: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.1rem;
  text-align: center;
  z-index: 100;
  cursor: pointer;
  text-shadow:
    0 0 15px rgba(255,255,255,.4),
    0 10px 25px rgba(0,0,0,1);
}

/* INTRO TEXT */
#overlay {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  font-size: 2.2rem;
  color: #ddd;
  z-index: 50;
  text-shadow:
    0 0 15px rgba(0,0,0,1),
    0 10px 25px rgba(0,0,0,1);
}

/* MAIN */
#main {
  display: none;
  position: absolute;
  top: 30%;
  width: 100%;
  text-align: center;
  z-index: 10;
}

/* ðŸŽ¬ CINEMATIC TITLE */
.cinematic-title {
  font-size: 4.8rem;
  letter-spacing: 6px;
  text-transform: uppercase;
  perspective: 800px;
}

.cinematic-title span {
  display: inline-block;
  color: #7a0000;
  text-shadow:
    0 0 15px rgba(139,0,0,.9),
    0 0 35px rgba(0,0,0,1),
    0 12px 25px rgba(0,0,0,1);
  animation:
    wave 3.5s ease-in-out infinite,
    glowBreath 4s ease-in-out infinite;
}

.cinematic-title span:nth-child(even) {
  animation-delay: .25s;
}

/* USERNAME */
#name {
  font-size: 5.3rem;
  margin-top: 25px;
  letter-spacing: 3px;
  color: #00fff0;
  text-shadow:
    0 0 20px rgba(0,255,240,.9),
    0 0 45px rgba(0,0,0,1),
    0 12px 30px rgba(0,0,0,1);
  animation: pulse 1.8s infinite ease-in-out;
}

/* ANIMATIONS */
@keyframes pulse {
  from { transform: scale(1); }
  to   { transform: scale(1.06); }
}

@keyframes wave {
  0% { transform: translateY(0) rotateX(0deg); }
  50% { transform: translateY(-14px) rotateX(12deg); }
  100% { transform: translateY(0) rotateX(0deg); }
}

@keyframes glowBreath {
  from {
    text-shadow:
      0 0 10px rgba(139,0,0,.6),
      0 0 25px rgba(0,0,0,1);
  }
  to {
    text-shadow:
      0 0 25px rgba(255,0,0,.9),
      0 0 50px rgba(0,0,0,1);
  }
}

/* FIREWORK CANVAS */
canvas {
  position: fixed;
  inset: 0;
  z-index: 5;
}
</style>
</head>

<body>

<div id="bg"></div>

<audio id="bgMusic" loop preload="auto">
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div id="tapScreen">
  ðŸŽ† Tap anywhere to begin your surprise ðŸŽ†
</div>

<div id="overlay"></div>

<div id="main">
  <div class="cinematic-title">
    <span>H</span><span>A</span><span>P</span><span>P</span><span>Y</span>
    <span>&nbsp;</span>
    <span>N</span><span>E</span><span>W</span>
    <span>&nbsp;</span>
    <span>Y</span><span>E</span><span>A</span><span>R</span>
    <span>&nbsp;</span>
    <span>2</span><span>0</span><span>2</span><span>6</span>
  </div>
  <div id="name"></div>
</div>

<canvas id="canvas"></canvas>

<script>
/* USERNAME */
const params = new URLSearchParams(location.search);
const rawName = params.get("username") || "SPECIAL ONE";
const username = rawName.toLowerCase();

/* USER IMAGE MAP */
const images = {
  shweta: "shweta.jpg",
  rahul: "rahul.jpg",
  amit: "amit.jpg",
  akhil: "akhil.jpg",
  aman:"aman.jpg",
  aakash: "aakash.jpg",
  sonam: "sonam.jpg",
  khusboo: "khusboo.jpg",
  kshamanand: "kshamanand.jpg",
};

const bg = document.getElementById("bg");
bg.style.background = `
  linear-gradient(rgba(0,0,0,.65), rgba(0,0,0,.85)),
  url("${images[username] || "stranger.jpg"}") center/cover no-repeat
`;

/* AUDIO + START */
const tapScreen = document.getElementById("tapScreen");
const overlay = document.getElementById("overlay");
const music = document.getElementById("bgMusic");

tapScreen.onclick = async () => {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  await ctx.resume();
  music.volume = .8;
  music.play().catch(()=>{});
  tapScreen.style.display = "none";
  overlay.style.display = "flex";
  startIntro();
};

/* INTRO */
const lines = [
  "Initializing celebration...",
  "Preparing something special...",
  "Almost ready..."
];
let l = 0, c = 0;

function startIntro() { type(); }

function type() {
  if (l >= lines.length) return setTimeout(reveal, 1200);
  overlay.innerText = lines[l].slice(0, c++);
  if (c <= lines[l].length) setTimeout(type, 60);
  else { c = 0; l++; setTimeout(type, 700); }
}

/* REVEAL */
let blast = false;
function reveal() {
  overlay.innerText = "This celebration is for...";
  setTimeout(() => {
    overlay.style.display = "none";
    bg.style.opacity = "1";
    document.getElementById("main").style.display = "block";
    document.getElementById("name").innerText = rawName.toUpperCase();
    blast = true;
  }, 1500);
}

/* FIREWORKS */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth; canvas.height = innerHeight;

let fireworks = [];

class Firework {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = canvas.height;
    this.t = Math.random() * canvas.height / 2;
    this.e = false;
    this.p = [];
  }
  update() {
    if (!this.e) {
      this.y -= 6;
      if (this.y <= this.t) {
        this.e = true;
        for (let i = 0; i < (blast ? 120 : 40); i++)
          this.p.push(new Particle(this.x, this.y));
      }
    }
  }
  draw() {
    if (!this.e) {
      ctx.fillStyle = "white";
      ctx.beginPath();
      ctx.arc(this.x, this.y, 2, 0, Math.PI*2);
      ctx.fill();
    }
  }
}

class Particle {
  constructor(x,y){
    this.x=x; this.y=y;
    this.a=Math.random()*Math.PI*2;
    this.s=Math.random()*8+2;
    this.l=80;
    this.c=`hsl(${Math.random()*360},100%,60%)`;
  }
  update(){
    this.x+=Math.cos(this.a)*this.s;
    this.y+=Math.sin(this.a)*this.s;
    this.l--;
  }
  draw(){
    ctx.fillStyle=this.c;
    ctx.beginPath();
    ctx.arc(this.x,this.y,2,0,Math.PI*2);
    ctx.fill();
  }
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(Math.random()<(blast?.15:.03))fireworks.push(new Firework());
  fireworks.forEach((f,i)=>{
    f.update(); f.draw();
    f.p.forEach(p=>{p.update();p.draw();});
    f.p=f.p.filter(p=>p.l>0);
    if(f.e&&f.p.length==0)fireworks.splice(i,1);
  });
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
